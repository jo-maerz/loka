<h1 mat-dialog-title>Create an Experience</h1>
<div mat-dialog-content class="dialog-content">
  <form>
    <!-- Experience Name -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Experience Name</mat-label>
      <input matInput [(ngModel)]="experience.name" name="name" required />
    </mat-form-field>

    <!-- Date Picker -->
    <div class="date-time-group">
      <mat-form-field appearance="fill" class="date-field">
        <mat-label>Start Date</mat-label>
        <input
          matInput
          [matDatepicker]="startPicker"
          [(ngModel)]="startDate"
          name="startDate"
          required
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="startPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #startPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" class="time-field">
        <mat-label>Start Time</mat-label>
        <input
          matInput
          type="time"
          [(ngModel)]="startTime"
          name="startTime"
          required
        />
      </mat-form-field>
    </div>

    <div class="date-time-group">
      <mat-form-field appearance="fill" class="date-field">
        <mat-label>End Date</mat-label>
        <input
          matInput
          [matDatepicker]="endPicker"
          [(ngModel)]="endDate"
          name="endDate"
          required
        />
        <mat-datepicker-toggle
          matSuffix
          [for]="endPicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #endPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill" class="time-field">
        <mat-label>End Time</mat-label>
        <input
          matInput
          type="time"
          [(ngModel)]="endTime"
          name="endTime"
          required
        />
      </mat-form-field>
    </div>

    <!-- Address Input -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Address</mat-label>
      <input
        matInput
        [(ngModel)]="experience.address"
        name="address"
        (blur)="geocodeAddress()"
        required
      />
    </mat-form-field>

    <!-- Map for Picking Location -->
    <div class="map-section">
      <label class="form-label">Pick Location on Map</label>
      <div id="selectMap" class="map-container-small"></div>
    </div>

    <!-- Description -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Description</mat-label>
      <textarea
        matInput
        [(ngModel)]="experience.description"
        name="description"
        rows="2"
      ></textarea>
    </mat-form-field>

    <!-- Hashtags -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Hashtags</mat-label>
      <input
        matInput
        [(ngModel)]="hashtagsInput"
        name="hashtagsInput"
        placeholder="#fun #music"
      />
    </mat-form-field>

    <!-- Category -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Category</mat-label>
      <mat-select [(ngModel)]="experience.category" name="category" required>
        <mat-option value="" disabled>Select a category</mat-option>
        <mat-option value="Food Festival">Food Festival</mat-option>
        <mat-option value="Art Installation">Art Installation</mat-option>
        <mat-option value="Concert">Concert</mat-option>
        <mat-option value="Outdoor Gathering">Outdoor Gathering</mat-option>
        <mat-option value="Flea Market">Flea Market</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Pictures -->
    <div class="images-section">
      <label for="experiencePictures" class="form-label"
        >Pictures (up to 10)</label
      >
      <input
        type="file"
        id="experiencePictures"
        class="form-control"
        (change)="handleFileUpload($event)"
        multiple
        accept="image/*"
      />
      <div class="image-preview" *ngFor="let img of experience.images">
        <img [src]="img.preview" alt="Preview" style="max-width: 100px" />
      </div>
      <input type="file" multiple (change)="handleFileUpload($event)" />
    </div>
  </form>
</div>
<div mat-dialog-actions class="dialog-actions">
  <button mat-raised-button color="primary" (click)="submitExperience()">
    Save Experience
  </button>
  <button mat-raised-button color="secondary" (click)="dialogRef.close()">
    Close
  </button>
</div>
